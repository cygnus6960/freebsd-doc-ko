# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR The FreeBSD Project
# This file is distributed under the same license as the FreeBSD Documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: FreeBSD Documentation VERSION\n"
"POT-Creation-Date: 2024-01-17 20:35-0300\n"
"PO-Revision-Date: 2021-06-12 18:24+0000\n"
"Last-Translator: Anonymous <noreply@weblate.org>\n"
"Language-Team: Chinese (Simplified) <https://translate-dev.freebsd.org/"
"projects/documentation/bookshandbookjails_index/zh_CN/>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"X-Generator: Weblate 4.6.2\n"

#. type: YAML Front Matter: description
#: documentation/content/en/books/handbook/jails/_index.adoc:1
#, no-wrap
msgid "Jails improve on the concept of the traditional chroot environment in several ways"
msgstr ""

#. type: YAML Front Matter: part
#: documentation/content/en/books/handbook/jails/_index.adoc:1
#, no-wrap
msgid "Part III. System Administration"
msgstr ""

#. type: YAML Front Matter: title
#: documentation/content/en/books/handbook/jails/_index.adoc:1
#, no-wrap
msgid "Chapter 17. Jails and Containers"
msgstr ""

#. type: Title =
#: documentation/content/en/books/handbook/jails/_index.adoc:14
#, no-wrap
msgid "Jails and Containers"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/jails/_index.adoc:52
#, no-wrap
msgid "Synopsis"
msgstr "简介"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:58
#, fuzzy
msgid ""
"Since system administration is a difficult task, many tools have been "
"developed to make life easier for the administrator.  These tools often "
"enhance the way systems are installed, configured, and maintained.  One of "
"the tools which can be used to enhance the security of a FreeBSD system is "
"_jails_.  Jails have been available since FreeBSD 4.X and continue to be "
"enhanced in their usefulness, performance, reliability, and security."
msgstr ""
"由于系统管理是一项艰巨的任务，故程序员开发了许多工具，使管理员的工作更轻松。"
"这些工具通常增强系统的安装、配置和维护方式。其中一个可以用来增强 FreeBSD 系统"
"安全性的工具是 <firstterm>jails</firstterm>。Jail 自 FreeBSD 4.X 以来就已可"
"用，并在其实用性、性能、可靠性和安全性方面不断得到增强。"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:63
msgid ""
"Jails build upon the man:chroot[2] concept, which is used to change the root "
"directory of a set of processes.  This creates a safe environment, separate "
"from the rest of the system.  Processes created in the chrooted environment "
"can not access files or resources outside of it.  For that reason, "
"compromising a service running in a chrooted environment should not allow "
"the attacker to compromise the entire system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:67
msgid ""
"However, a chroot has several limitations.  It is suited to easy tasks which "
"do not require much flexibility or complex, advanced features.  Over time, "
"many ways have been found to escape from a chrooted environment, making it a "
"less than ideal solution for securing services."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:69
msgid ""
"Jails improve on the concept of the traditional chroot environment in "
"several ways."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:75
#, fuzzy
#| msgid ""
#| "Jails improve on the concept of the traditional chroot environment in "
#| "several ways. In a traditional chroot environment, processes are only "
#| "limited in the part of the file system they can access. The rest of the "
#| "system resources, system users, running processes, and the networking "
#| "subsystem are shared by the chrooted processes and the processes of the "
#| "host system. Jails expand this model by virtualizing access to the file "
#| "system, the set of users, and the networking subsystem. More fine-grained "
#| "controls are available for tuning the access of a jailed environment. "
#| "Jails can be considered as a type of operating system-level "
#| "virtualization."
msgid ""
"In a traditional chroot environment, processes are only limited in the part "
"of the file system they can access.  The rest of the system resources, "
"system users, running processes, and the networking subsystem are shared by "
"the chrooted processes and the processes of the host system.  Jails expand "
"this model by virtualizing access to the file system, the set of users, and "
"the networking subsystem.  More fine-grained controls are available for "
"tuning the access of a jailed environment.  Jails can be considered as a "
"type of operating system-level virtualization."
msgstr ""
"Jail 通过多种方式改进了传统 chroot 环境的概念。在传统的 chroot 环境中，进程仅"
"限于它们可以访问的文件系统部分。chroot 中的进程和主机系统的进程共享其余的系统"
"资源，系统用户，运行的进程和网络子系统。Jail 通过虚拟化对文件系统，用户集和网"
"络子系统的访问来扩展此模型。可以使用更多细粒度的控件来调整监狱环境的访问。"
"Jails可以被视为一种操作系统级别的虚拟化。"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:77
msgid "This chapter covers:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:79
msgid "What a jail is and what purpose it may serve in FreeBSD installations."
msgstr "什么是jail，它在FreeBSD 安装过程中的作用是什么。"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:80
msgid "The different types of jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:81
msgid "The different ways to configure the network for a jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:82
#, fuzzy
#| msgid "Time Zone Configuration"
msgid "The jail configuration file."
msgstr "设置时区"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:83
msgid "How to create the different types of jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:84
#, fuzzy
#| msgid "How to build, start, and stop a jail."
msgid "How to start, stop, and restart a jail."
msgstr "如何联编、 启动和停止 jail。"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:85
msgid ""
"The basics of jail administration, both from inside and outside the jail."
msgstr "如何从 jail 内部或主机上进行管理的一些基础知识。"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:86
msgid "How to upgrade the different types of jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:87
msgid "A incomplete list of the different FreeBSD jail managers."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/jails/_index.adoc:89
#, fuzzy, no-wrap
#| msgid "Jails"
msgid "Jail Types"
msgstr "Jails"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:93
msgid ""
"Some administrators divide jails into different types, although the "
"underlying technology is the same.  Each administrator will have to assess "
"what type of jail to create in each case depending on the problem they have "
"to solve."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:95
msgid ""
"Below can be found a list of the different types, their characteristics, and "
"considerations for use."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:97
#, fuzzy, no-wrap
#| msgid "Jails"
msgid "Thick Jails"
msgstr "Jails"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:104
msgid ""
"A thick jail is a traditional form of FreeBSD Jail.  In a thick jail, a "
"complete copy of the base system is replicated within the jail's "
"environment.  This means that the jail has its own separate instance of the "
"FreeBSD base system, including libraries, executables, and configuration "
"files.  The jail can be thought of as an almost complete standalone FreeBSD "
"installation, but running within the confines of the host system.  This "
"isolation ensures that the processes within the jail are kept separate from "
"those on the host and other jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:106
msgid "Advantages of Thick Jails:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:108
msgid ""
"High degree of isolation: Processes within the jail are isolated from the "
"host system and other jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:109
msgid ""
"Independence: Thick jails can have different versions of libraries, "
"configurations, and software than the host system or other jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:110
msgid ""
"Security: Since the jail contains its own base system, vulnerabilities or "
"issues affecting the jail environment won't directly impact the host or "
"other jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:112
msgid "Disadvantages of Thick Jails:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:114
msgid ""
"Resource overhead: Because each jail maintains its own separate base system, "
"thick jails consume more resources compared to thin jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:115
msgid ""
"Maintenance: Each jail requires its own maintenance and updates for its base "
"system components."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/jails/_index.adoc:117
#: documentation/content/en/books/handbook/jails/_index.adoc:383
#, fuzzy, no-wrap
#| msgid "Creating Jails"
msgid "Thin Jails"
msgstr "建立 Jail"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:123
msgid ""
"A thin jail shares the base system using OpenZFS snapshots or NullFS mounts "
"from a template.  Only a minimal subset of base system is duplicated for "
"each thin jail, resulting in less resource consumption compared to a thick "
"jail.  However, this also means that thin jails have less isolation and "
"independence compared to thick jails.  Changes in shared components could "
"potentially affect multiple thin jails simultaneously."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:125
msgid ""
"In summary, a FreeBSD Thin Jail is a type of FreeBSD Jail that replicates a "
"substantial portion, but not all, of the base system within the isolated "
"environment."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:127
msgid "Advantages of Thin Jails:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:129
msgid ""
"Resource Efficiency: Thin jails are more resource-efficient compared to "
"thick jails. Since they share most of the base system, they consume less "
"disk space and memory. This makes it possible to run more jails on the same "
"hardware without consuming excessive resources."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:130
msgid ""
"Faster Deployment: Creating and launching thin jails is generally faster "
"compared to thick jails. This can be particularly advantageous when you need "
"to rapidly deploy multiple instances."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:131
msgid ""
"Unified Maintenance: Since thin jails share the majority of their base "
"system with the host system, updates and maintenance of common base system "
"components (such as libraries and binaries) only need to be done once on the "
"host. This simplifies the maintenance process compared to maintaining an "
"individual base system for each thick jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:132
msgid ""
"Shared Resources: Thin jails can more easily share common resources such as "
"libraries and binaries with the host system. This can potentially lead to "
"more efficient disk caching and improved performance for applications within "
"the jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:134
msgid "Disadvantages of Thin Jails:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:136
msgid ""
"Reduced Isolation: The primary disadvantage of thin jails is that they offer "
"less isolation compared to thick jails. Since they share a significant "
"portion of the template's base system, vulnerabilities or issues affecting "
"shared components could potentially impact multiple jails simultaneously."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:137
msgid ""
"Security Concerns: The reduced isolation in thin jails could pose security "
"risks, as a compromise in one jail might have a greater potential to affect "
"other jails or the host system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:138
msgid ""
"Dependency Conflicts: If multiple thin jails require different versions of "
"the same libraries or software, managing dependencies can become complex. In "
"some cases, this might require additional effort to ensure compatibility."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:139
msgid ""
"Compatibility Challenges: Applications within a thin jail might encounter "
"compatibility issues if they assume a certain base system environment that "
"differs from the shared components provided by the template."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:141
#, fuzzy, no-wrap
#| msgid "Jails"
msgid "VNET Jails"
msgstr "Jails"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:146
msgid ""
"A FreeBSD VNET jail is a virtualized environment that allows for the "
"isolation and control of network resources for processes running within it.  "
"It provides a high level of network segmentation and security by creating a "
"separate network stack for processes within the jail, ensuring that network "
"traffic within the jail is isolated from the host system and other jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:149
msgid ""
"In essence, FreeBSD VNET jails add a network configuration mechanism.  This "
"means a VNET jail can be created as a Thick or Thin Jail."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:151
#, fuzzy, no-wrap
#| msgid "Creating Jails"
msgid "Linux Jails"
msgstr "建立 Jail"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:156
msgid ""
"A FreeBSD Linux Jail is a feature in the FreeBSD operating system that "
"enables the use of Linux binaries and applications within a FreeBSD jail.  "
"This functionality is achieved by incorporating a compatibility layer that "
"allows certain Linux system calls and libraries to be translated and "
"executed on the FreeBSD kernel.  The purpose of a Linux Jail is to "
"facilitate the execution of Linux software on a FreeBSD system without "
"needing a separate Linux virtual machine or environment."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/jails/_index.adoc:158
#, fuzzy, no-wrap
#| msgid "Time Zone Configuration"
msgid "Host Configuration"
msgstr "设置时区"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:161
msgid ""
"Before creating any jail on the host system it is necessary to perform "
"certain configuration and obtain some information from the host system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:163
msgid ""
"It will be necessary to configure the man:jail[8] utility, create the "
"necessary directories to configure and install jails, obtain information "
"from the host's network, and check whether the host uses OpenZFS or UFS as "
"its file system."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/jails/_index.adoc:167
msgid ""
"The FreeBSD version running in the jail can not be newer than the version "
"running in the host."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:170
#, no-wrap
msgid "Jail Utility"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:173
msgid "The man:jail[8] utility manages jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:175
msgid "To start jails when the system boots, run the following commands:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:180
#, no-wrap
msgid ""
"# sysrc jail_enable=\"YES\"\n"
"# sysrc jail_parallel_start=\"YES\"\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/jails/_index.adoc:185
msgid ""
"With `jail_parallel_start`, all configured jails will be started in the "
"background."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:188
#, no-wrap
msgid "Networking"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:191
msgid "Networking for FreeBSD jails can be configured several different ways:"
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/jails/_index.adoc:192
#, no-wrap
msgid "Host Networking Mode (IP Sharing)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:196
msgid ""
"In host networking mode, a jail shares the same networking stack as the host "
"system.  When a jail is created in host networking mode it uses the same "
"network interface and IP address.  This means that the jail doesn't have a "
"separate IP address, and its network traffic is associated with the host's "
"IP."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/jails/_index.adoc:197
#, no-wrap
msgid "Virtual Networks (VNET)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:201
msgid ""
"Virtual Networks are a feature of FreeBSD jails that offer more advanced and "
"flexible networking solutions than a basic networking mode like host "
"networking.  VNET allows the creation of isolated network stacks for each "
"jail, providing them with their own separate IP addresses, routing tables, "
"and network interfaces.  This offers a higher level of network isolation and "
"allows jails to function as if they are running on separate virtual machines."
msgstr ""

#. type: Labeled list
#: documentation/content/en/books/handbook/jails/_index.adoc:202
#, no-wrap
msgid "The netgraph system"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:205
msgid ""
"man:netgraph[4] is a versatile kernel framework for creating custom network "
"configurations.  It can be used to define how network traffic flows between "
"jails and the host system and between different jails."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:207
#, no-wrap
msgid "Setting Up the Jail Directory Tree"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:210
msgid "There is no specific place to put the files for the jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:213
msgid ""
"Some administrators use [.filename]#/jail#, others [.filename]#/usr/jail#, "
"and still others [.filename]#/usr/local/jails#.  In this chapter [."
"filename]#/usr/local/jails# will be used."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:215
msgid ""
"Apart from [.filename]#/usr/local/jails# other directories will be created:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:217
msgid ""
"[.filename]#media# will contain the compressed files of the downloaded "
"userlands."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:218
msgid ""
"[.filename]#templates# will contain the templates when using Thin Jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:219
msgid "[.filename]#containers# will contain the jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:221
msgid ""
"When using OpenZFS, execute the following commands to create datasets for "
"these directories:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:228
#, no-wrap
msgid ""
"# zfs create -o mountpoint=/usr/local/jails zroot/jails\n"
"# zfs create zroot/jails/media\n"
"# zfs create zroot/jails/templates\n"
"# zfs create zroot/jails/containers\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/jails/_index.adoc:233
msgid ""
"In this case, `zroot` was used for the parent dataset, but other datasets "
"could have been used."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:236
msgid ""
"When using UFS, execute the following commands to create the directories:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:243
#, no-wrap
msgid ""
"# mkdir /usr/local/jails/\n"
"# mkdir /usr/local/jails/media\n"
"# mkdir /usr/local/jails/templates\n"
"# mkdir /usr/local/jails/containers\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:246
#, fuzzy, no-wrap
#| msgid "Time Zone Configuration"
msgid "Jail Configuration Files"
msgstr "设置时区"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:249
msgid "There are two ways to configure jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:252
msgid ""
"The first one is to add an entry for each jail to the file [.filename]#/etc/"
"jail.conf#.  The other option is to create a file for each jail in the "
"directory [.filename]#/etc/jail.conf.d/#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:255
msgid ""
"There is no right or wrong option.  Each administrator must choose the one "
"that best suits their needs."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:258
msgid ""
"In case a host system has few jails, an entry for each jail can be added in "
"the file [.filename]#/etc/jail.conf#.  If the host system has many jails, it "
"is good idea to have one configuration file for each jail in the [."
"filename]#/etc/jail.conf.d/# directory."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:260
msgid "A typical jail entry would look like this:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:268
#, no-wrap
msgid ""
"jailname { <.>\n"
"  # STARTUP/LOGGING\n"
"  exec.start = \"/bin/sh /etc/rc\"; <.>\n"
"  exec.stop = \"/bin/sh /etc/rc.shutdown\"; <.>\n"
"  exec.consolelog = \"/var/log/jail_console_${name}.log\"; <.>\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:273
#, no-wrap
msgid ""
"  # PERMISSIONS\n"
"  allow.raw_sockets; <.>\n"
"  exec.clean; <.>\n"
"  mount.devfs; <.>\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:277
#, no-wrap
msgid ""
"  # HOSTNAME/PATH\n"
"  host.hostname = \"${name}\"; <.>\n"
"  path = \"/usr/local/jails/containers/${name}\"; <.>\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:283
#, no-wrap
msgid ""
"  # NETWORK\n"
"  ip4.addr = 192.168.1.151; <.>\n"
"  ip6.addr = ::ffff:c0a8:197 <.>\n"
"  interface = em0; <.>\n"
"}\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:286
msgid "`jailname` - Name of the jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:287
msgid ""
"`exec.start` - Command(s) to run in the jail environment when a jail is "
"created. A typical command to run is \"/bin/sh /etc/rc\"."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:288
msgid ""
"`exec.stop` - Command(s) to run in the jail environment before a jail is "
"removed. A typical command to run is \"/bin/sh /etc/rc.shutdown\"."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:289
msgid ""
"`exec.consolelog` - A file to direct command output (stdout and stderr) to."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:290
msgid ""
"`allow.raw_sockets` - Allow creating raw sockets inside the jail. Setting "
"this parameter allows utilities like man:ping[8] and man:traceroute[8] to "
"operate inside the jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:291
msgid "`exec.clean` - Run commands in a clean environment."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:292
msgid ""
"`mount.devfs` - Mount a man:devfs[5] filesystem on the chrooted [.filename]#/"
"dev# directory, and apply the ruleset in the devfs_ruleset parameter to "
"restrict the devices visible inside the jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:293
msgid "`host.hostname` - The hostname of the jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:294
msgid ""
"`path` - The directory which is to be the root of the jail. Any commands "
"that are run inside the jail, either by jail or from man:jexec[8], are run "
"from this directory."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:295
msgid ""
"`ip4.addr` - IPv4 address. There are two configuration possibilities for "
"IPv4. The first is to establish an IP or a list of IPs as has been done in "
"the example. The other is to use `ip4` instead and set the `inherit` value "
"to inherit the host's IP address."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:296
msgid ""
"`ip6.addr` - IPv6 address. There are two configuration possibilities for "
"IPv6. The first is to establish an IP or a list of IPs as has been done in "
"the example. The other is to use `ip6` instead and set the `inherit` value "
"to inherit the host's IP address."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:297
msgid ""
"`interface` - A network interface to add the jail's IP addresses. Usually "
"the host interface."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:299
msgid ""
"More information about configuration variables can be found in man:jail[8] "
"and man:jail.conf[5]."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/jails/_index.adoc:301
#, no-wrap
msgid "Classic Jail (Thick Jail)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:305
msgid ""
"These jails resemble a real FreeBSD system.  They can be managed more or "
"less like a normal host system and updated independently."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:307
#, fuzzy, no-wrap
#| msgid "Creating and Controlling Jails"
msgid "Creating a Classic Jail"
msgstr "创建和控制 Jail"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:310
msgid ""
"In principle, a jail only needs a hostname, a root directory, an IP address, "
"and a userland."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:312
msgid ""
"The userland for the jail can be obtained from the official FreeBSD download "
"servers."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:314
msgid "Execute the following command to download the userland:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:318
#: documentation/content/en/books/handbook/jails/_index.adoc:412
#: documentation/content/en/books/handbook/jails/_index.adoc:515
#, no-wrap
msgid "# fetch https://download.freebsd.org/ftp/releases/amd64/amd64/13.2-RELEASE/base.txz -o /usr/local/jails/media/13.2-RELEASE-base.txz\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:321
#, fuzzy
#| msgid ""
#| "Once the command is complete, the next step is configuring the host to "
#| "run the jail."
msgid ""
"Once the download is complete, it will be necessary to extract the contents "
"into the jail directory."
msgstr "命令完成后，下一步来配置主机以运行 jail。"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:323
msgid ""
"Execute the following commands to extract the userland into the jail's "
"directory:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:328
#, no-wrap
msgid ""
"# mkdir -p /usr/local/jails/containers/classic\n"
"# tar -xf /usr/local/jails/media/13.2-RELEASE-base.txz -C /usr/local/jails/containers/classic --unlink\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:331
msgid ""
"With the userland extracted in the jail directory, it will be necessary to "
"copy the timezone and DNS server files:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:336
#, no-wrap
msgid ""
"# cp /etc/resolv.conf /usr/local/jails/containers/classic/etc/resolv.conf\n"
"# cp /etc/localtime /usr/local/jails/containers/classic/etc/localtime\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:339
msgid ""
"With the files copied, the next thing to do is update to the latest patch "
"level by executing the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:343
#, no-wrap
msgid "# freebsd-update -b /usr/local/jails/containers/classic/ fetch install\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:347
#: documentation/content/en/books/handbook/jails/_index.adoc:456
msgid ""
"The last step is to configure the jail.  It will be necessary to add an "
"entry to the configuration file [.filename]#/etc/jail.conf# or in [."
"filename]#jail.conf.d# with the parameters of the jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:349
#: documentation/content/en/books/handbook/jails/_index.adoc:458
msgid "An example would be the following:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:357
#, no-wrap
msgid ""
"classic {\n"
"  # STARTUP/LOGGING\n"
"  exec.start = \"/bin/sh /etc/rc\";\n"
"  exec.stop = \"/bin/sh /etc/rc.shutdown\";\n"
"  exec.consolelog = \"/var/log/jail_console_${name}.log\";\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:362
#: documentation/content/en/books/handbook/jails/_index.adoc:471
#: documentation/content/en/books/handbook/jails/_index.adoc:625
#, no-wrap
msgid ""
"  # PERMISSIONS\n"
"  allow.raw_sockets;\n"
"  exec.clean;\n"
"  mount.devfs;\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:366
#: documentation/content/en/books/handbook/jails/_index.adoc:475
#: documentation/content/en/books/handbook/jails/_index.adoc:629
#: documentation/content/en/books/handbook/jails/_index.adoc:834
#, no-wrap
msgid ""
"  # HOSTNAME/PATH\n"
"  host.hostname = \"${name}\";\n"
"  path = \"/usr/local/jails/containers/${name}\";\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:371
#, no-wrap
msgid ""
"  # NETWORK\n"
"  ip4.addr = 192.168.1.151;\n"
"  interface = em0;\n"
"}\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:374
#: documentation/content/en/books/handbook/jails/_index.adoc:483
#: documentation/content/en/books/handbook/jails/_index.adoc:648
msgid "Execute the following command to start the jail:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:378
#, no-wrap
msgid "# service jail start classic\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:381
#: documentation/content/en/books/handbook/jails/_index.adoc:490
msgid ""
"More information on how to manage jails can be found in the section <<jail-"
"management>>."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:389
msgid ""
"Although Thin Jails use the same technology as Thick Jails, the creation "
"procedure is different.  Thin jails can be created using OpenZFS snapshots "
"or using templates and NullFS.  The use of OpenZFS snapshots and templates "
"using NullFS have certain advantages over classic jails, such as being able "
"to create them faster from snapshots or being able to update multiple jails "
"using NullFS."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:391
#, no-wrap
msgid "Creating a Thin Jail Using OpenZFS Snapshots"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:394
msgid ""
"Due to the good integration between FreeBSD and OpenZFS it is very easy to "
"create new Thin Jails using OpenZFS Snapshots."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:396
msgid ""
"To create a Thin Jail using OpenZFS Snapshots the first step is to create a "
"template."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:399
msgid ""
"Templates will only be used to create new jails.  For this reason they are "
"created in \"read-only\" mode so that jails are created with an immutable "
"base."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:401
msgid "To create the dataset for the template, execute the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:405
#, no-wrap
msgid "# zfs create -p zroot/jails/templates/13.2-RELEASE\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:408
#: documentation/content/en/books/handbook/jails/_index.adoc:511
msgid "Then execute the following command to download the userland:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:415
#: documentation/content/en/books/handbook/jails/_index.adoc:518
msgid ""
"Once the download is complete, it will be necessary to extract the contents "
"in the template directory by executing the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:419
#, no-wrap
msgid "# tar -xf /usr/local/jails/media/13.2-RELEASE-base.txz -C /usr/local/jails/templates/13.2-RELEASE --unlink\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:422
msgid ""
"With the userland extracted in the templates directory, it will be necessary "
"to copy the timezone and DNS server files to the template directory by "
"executing the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:427
#, no-wrap
msgid ""
"# cp /etc/resolv.conf /usr/local/jails/templates/13.2-RELEASE/etc/resolv.conf\n"
"# cp /etc/localtime /usr/local/jails/templates/13.2-RELEASE/etc/localtime\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:430
msgid ""
"The next thing to do is update to the latest patch level by executing the "
"following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:434
#, no-wrap
msgid "# freebsd-update -b /usr/local/jails/templates/13.2-RELEASE/ fetch install\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:437
msgid "Once the update is finished, the template is ready."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:439
msgid ""
"To create an OpenZFS Snapshot from the template, execute the following "
"command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:443
#, no-wrap
msgid "# zfs snapshot zroot/jails/templates/13.2-RELEASE@base\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:446
msgid ""
"Once the OpenZFS Snapshot has been created, infinite jails can be created "
"using the OpenZFS clone function."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:448
msgid "To create a Thin Jail named `thinjail`, execute the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:452
#, no-wrap
msgid "# zfs clone zroot/jails/templates/13.2-RELEASE@base zroot/jails/containers/thinjail\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:466
#: documentation/content/en/books/handbook/jails/_index.adoc:620
#, no-wrap
msgid ""
"thinjail {\n"
"  # STARTUP/LOGGING\n"
"  exec.start = \"/bin/sh /etc/rc\";\n"
"  exec.stop = \"/bin/sh /etc/rc.shutdown\";\n"
"  exec.consolelog = \"/var/log/jail_console_${name}.log\";\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:480
#, no-wrap
msgid ""
"  # NETWORK\n"
"  ip4 = inherit;\n"
"  interface = em0;\n"
"}\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:487
#: documentation/content/en/books/handbook/jails/_index.adoc:652
#, no-wrap
msgid "# service jail start thinjail\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:492
#, fuzzy, no-wrap
#| msgid "Creating and Controlling Jails"
msgid "Creating a Thin Jail Using NullFS"
msgstr "创建和控制 Jail"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:495
msgid ""
"A jail can be created with reduced duplication of system files by using the "
"Thin Jail technique and using NullFS to selectively share specific "
"directories from the host system into the jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:497
msgid ""
"The first step is to create the dataset to save the template, execute the "
"following command if using OpenZFS:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:501
#, no-wrap
msgid "# zfs create -p zroot/jails/templates/13.2-RELEASE-base\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:504
msgid "Or this one if using UFS:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:508
#, no-wrap
msgid "# mkdir /usr/local/jails/templates/13.2-RELEASE-base\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:522
#, no-wrap
msgid "# tar -xf /usr/local/jails/media/13.2-RELEASE-base.txz -C /usr/local/jails/templates/13.2-RELEASE-base --unlink\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:525
msgid ""
"Once the userland is extracted in the templates directory, it will be "
"necessary to copy the timezone and DNS server files to the template "
"directory by executing the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:530
#, no-wrap
msgid ""
"# cp /etc/resolv.conf /usr/local/jails/templates/13.2-RELEASE-base/etc/resolv.conf\n"
"# cp /etc/localtime /usr/local/jails/templates/13.2-RELEASE-base/etc/localtime\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:533
msgid ""
"With the files moved to the template, the next thing to do is update to the "
"latest patch level by executing the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:537
#, no-wrap
msgid "# freebsd-update -b /usr/local/jails/templates/13.2-RELEASE-base/ fetch install\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:541
msgid ""
"In addition to the base template, it is also necessary to create a directory "
"where the `skeleton` will be located.  Some directories will be copied from "
"the template to the `skeleton`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:543
msgid ""
"Execute the following command to create the dataset for the `skeleton` in "
"case of using OpenZFS:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:547
#, no-wrap
msgid "# zfs create -p zroot/jails/templates/13.2-RELEASE-skeleton\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:550
msgid "Or this one in case of using UFS:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:554
#, no-wrap
msgid "# mkdir /usr/local/jails/templates/13.2-RELEASE-skeleton\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:558
msgid ""
"Then create the `skeleton` directories.  The `skeleton` directories will "
"hold the local directories of the jails."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:560
msgid "Execute the following commands to create the directories:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:570
#, no-wrap
msgid ""
"# mkdir -p /usr/local/jails/templates/13.2-RELEASE-skeleton/home\n"
"# mkdir -p /usr/local/jails/templates/13.2-RELEASE-skeleton/usr\n"
"# mv /usr/local/jails/templates/13.2-RELEASE-base/etc /usr/local/jails/templates/13.2-RELEASE-skeleton/etc\n"
"# mv /usr/local/jails/templates/13.2-RELEASE-base/usr/local /usr/local/jails/templates/13.2-RELEASE-skeleton/usr/local\n"
"# mv /usr/local/jails/templates/13.2-RELEASE-base/tmp /usr/local/jails/templates/13.2-RELEASE-skeleton/tmp\n"
"# mv /usr/local/jails/templates/13.2-RELEASE-base/var /usr/local/jails/templates/13.2-RELEASE-skeleton/var\n"
"# mv /usr/local/jails/templates/13.2-RELEASE-base/root /usr/local/jails/templates/13.2-RELEASE-skeleton/root\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:573
msgid ""
"The next step is to create the symlinks to the `skeleton` by executing the "
"following commands:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:584
#, no-wrap
msgid ""
"# cd /usr/local/jails/templates/13.2-RELEASE-base/\n"
"# mkdir skeleton\n"
"# ln -s skeleton/etc etc\n"
"# ln -s skeleton/home home\n"
"# ln -s skeleton/root root\n"
"# ln -s skeleton/usr/local usr/local\n"
"# ln -s skeleton/tmp tmp\n"
"# ln -s skeleton/var var\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:587
msgid ""
"With the `skeleton` ready, it will be necessary to copy the data to the jail "
"directory."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:589
msgid ""
"In case of using OpenZFS, OpenZFS snapshots can be used to easily create as "
"many jails as necessary by executing the following commands:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:594
#, no-wrap
msgid ""
"# zfs snapshot zroot/jails/templates/13.2-RELEASE-skeleton@base\n"
"# zfs clone zroot/jails/templates/13.2-RELEASE-skeleton@base zroot/jails/containers/thinjail\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:597
msgid ""
"In case of using UFS the man:cp[1] program can be used by executing the "
"following commands:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:602
#, no-wrap
msgid ""
"# mkdir /usr/local/jails/containers/thinjail\n"
"# cp -R /usr/local/jails/templates/13.2-RELEASE-skeleton /usr/local/jails/containers/thinjail\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:605
msgid ""
"Then create the directory in which the base template and the skeleton will "
"be mounted:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:609
#, no-wrap
msgid "# mkdir -p /usr/local/jails/thinjail-nullfs-base\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:612
msgid ""
"Add a jail entry in [.filename]#/etc/jail.conf# or a file in [."
"filename]#jail.conf.d# as follows:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:633
#, no-wrap
msgid ""
"  # NETWORK\n"
"  ip4.addr = 192.168.1.153;\n"
"  interface = em0;\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:637
#, no-wrap
msgid ""
"  # MOUNT\n"
"  mount.fstab = \"/usr/local/jails/thinjail-nullfs-base.fstab\";\n"
"}\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:640
msgid ""
"Then the create the [.filename]#/usr/local/jails/thinjail-nullfs-base.fstab# "
"file as follows:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:645
#, no-wrap
msgid ""
"/usr/local/jails/templates/13.2-RELEASE-base  /usr/local/jails/thinjail-nullfs-base/ nullfs   ro          0 0\n"
"/usr/local/jails/containers/thinjail     /usr/local/jails/thinjail-nullfs-base/skeleton nullfs  rw  0 0\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:655
#, fuzzy, no-wrap
#| msgid "Creating Jails"
msgid "Creating a VNET Jail"
msgstr "建立 Jail"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:658
msgid ""
"FreeBSD VNET Jails have their own distinct networking stack, including "
"interfaces, IP addresses, routing tables, and firewall rules."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:660
msgid ""
"The first step to create a VNET jail is to create the man:bridge[4] by "
"executing the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:664
#, no-wrap
msgid "# ifconfig bridge create\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:667
#: documentation/content/en/books/handbook/jails/_index.adoc:883
#: documentation/content/en/books/handbook/jails/_index.adoc:899
msgid "The output should be similar to the following:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:671
#, no-wrap
msgid "bridge0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:674
msgid ""
"With the `bridge` created, it will be necessary to attach it to the `em0` "
"interface by executing the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:678
#, no-wrap
msgid "# ifconfig bridge0 addm em0\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:681
#, fuzzy
msgid ""
"To make this setting persist across reboots, add the following lines to [."
"filename]#/etc/rc.conf#:"
msgstr "将以下行添加到 <filename>/etc/rc.conf</filename> 创建克隆的环回接口："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:687
#, no-wrap
msgid ""
"defaultrouter=\"192.168.1.1\"\n"
"cloned_interfaces=\"bridge0\"\n"
"ifconfig_bridge0=\"inet 192.168.1.150/24 addm em0 up\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:690
msgid "The next step is to create the jail as indicated above."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:693
msgid ""
"Either the <<classic-jail>> procedure and the <<thin-jail>> procedure can be "
"used.  The only thing that will change is the configuration in the [."
"filename]#/etc/jail.conf# file."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:695
msgid ""
"The path [.filename]#/usr/local/jails/containers/vnet# will be used as an "
"example for the created jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:697
msgid "The following is an example configuration for a VNET jail:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:705
#, no-wrap
msgid ""
"vnet {\n"
"  # STARTUP/LOGGING\n"
"  exec.start = \"/bin/sh /etc/rc\";\n"
"  exec.stop  = \"/bin/sh /etc/rc.shutdown\";\n"
"  exec.consolelog = \"/var/log/jail_console_${name}.log\";\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:711
#, no-wrap
msgid ""
"  # PERMISSIONS\n"
"  allow.raw_sockets;\n"
"  exec.clean;\n"
"  mount.devfs;\n"
"  devfs_ruleset = 5;\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:715
#, no-wrap
msgid ""
"  # PATH/HOSTNAME\n"
"  path = \"/usr/local/jails/containers/${name}\";\n"
"  host.hostname = \"${name}\";\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:719
#, no-wrap
msgid ""
"  # VNET/VIMAGE\n"
"  vnet;\n"
"  vnet.interface = \"${epair}b\";\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:726
#, no-wrap
msgid ""
"  # NETWORKS/INTERFACES\n"
"  $id = \"154\"; <.>\n"
"  $ip = \"192.168.1.${id}/24\";\n"
"  $gateway = \"192.168.1.1\";\n"
"  $bridge = \"bridge0\"; <.>\n"
"  $epair = \"epair${id}\";\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:736
#, no-wrap
msgid ""
"  # ADD TO bridge INTERFACE\n"
"  exec.prestart += \"ifconfig ${epair} create up\";\n"
"  exec.prestart += \"ifconfig ${epair}a up descr jail:${name}\";\n"
"  exec.prestart += \"ifconfig ${bridge} addm ${epair}a up\";\n"
"  exec.start    += \"ifconfig ${epair}b ${ip} up\";\n"
"  exec.start    += \"route add default ${gateway}\";\n"
"  exec.poststop = \"ifconfig ${bridge} deletem ${epair}a\";\n"
"  exec.poststop += \"ifconfig ${epair}a destroy\";\n"
"}\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:739
msgid "Represents the IP of the Jail, it must be *unique*."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:740
msgid "Refers to the bridge created previously."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:742
#, fuzzy, no-wrap
#| msgid "Creating Jails"
msgid "Creating a Linux Jail"
msgstr "建立 Jail"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:748
msgid ""
"FreeBSD can run Linux inside a jail using crossref:linuxemu[linuxemu,Linux "
"Binary Compatibility] and man:debootstrap[8].  Jails do not have a kernel.  "
"They run on the host's kernel.  Therefore it is necessary to enable Linux "
"Binary Compatibility in the host system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:750
msgid "To enable the Linux ABI at boot time, execute the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:754
#, fuzzy, no-wrap
msgid "# sysrc linux_enable=\"YES\"\n"
msgstr "named_enable=\"YES\"\n"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:757
msgid ""
"Once enabled, it can be started without rebooting by executing the following "
"command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:761
#, no-wrap
msgid "# service linux start\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:765
msgid ""
"The next step will be to create a jail as indicated above, for example in "
"<<creating-thin-jail-openzfs-snapshots>>, but *without* performing the "
"configuration.  FreeBSD Linux jails require a specific configuration that "
"will be detailed below."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:767
msgid ""
"Once the jail has been created as explained above, execute the following "
"command to perform required configuration for the jail and start it:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:788
#, no-wrap
msgid ""
"# jail -cm \\\n"
"    name=ubuntu \\\n"
"    host.hostname=\"ubuntu.example.com\" \\\n"
"    path=\"/usr/local/jails/ubuntu\" \\\n"
"    interface=\"em0\" \\\n"
"    ip4.addr=\"192.168.1.150\" \\\n"
"    exec.start=\"/bin/sh /etc/rc\" \\\n"
"    exec.stop=\"/bin/sh /etc/rc.shutdown\" \\\n"
"    mount.devfs \\\n"
"    devfs_ruleset=4 \\\n"
"    allow.mount \\\n"
"    allow.mount.devfs \\\n"
"    allow.mount.fdescfs \\\n"
"    allow.mount.procfs \\\n"
"    allow.mount.linprocfs \\\n"
"    allow.mount.linsysfs \\\n"
"    allow.mount.tmpfs \\\n"
"    enforce_statfs=1\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:791
msgid ""
"To access the jail, it will be necessary to install package:sysutils/"
"debootstrap[]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:793
msgid "Execute the following command to access the FreeBSD Linux jail:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:797
#, no-wrap
msgid "# jexec -u root ubuntu\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:800
msgid ""
"Inside the jail, execute the following commands to install package:sysutils/"
"debootstrap[] and prepare the Ubuntu environment:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:805
#, no-wrap
msgid ""
"# pkg install debootstrap\n"
"# debootstrap jammy /compat/ubuntu\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:809
msgid ""
"When the process has finished and the message `Base system installed "
"successfully` is displayed on the console, it will be necessary to stop the "
"jail from the host system by executing the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:813
#, no-wrap
msgid "# service jail onestop ubuntu\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:816
msgid "Then add an entry in [.filename]#/etc/jail.conf# for the Linux jail:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:824
#, no-wrap
msgid ""
"ubuntu {\n"
"  # STARTUP/LOGGING\n"
"  exec.start = \"/bin/sh /etc/rc\";\n"
"  exec.stop = \"/bin/sh /etc/rc.shutdown\";\n"
"  exec.consolelog = \"/var/log/jail_console_${name}.log\";\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:830
#, no-wrap
msgid ""
"  # PERMISSIONS\n"
"  allow.raw_sockets;\n"
"  exec.clean;\n"
"  mount.devfs;\n"
"  devfs_ruleset=4;\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:838
#, no-wrap
msgid ""
"  # NETWORK\n"
"  ip4.addr = 192.168.1.155;\n"
"  interface = em0;\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:848
#, no-wrap
msgid ""
"  # MOUNT\n"
"  mount += \"devfs     $path/compat/ubuntu/dev     devfs     rw  0 0\";\n"
"  mount += \"tmpfs     $path/compat/ubuntu/dev/shm tmpfs     rw,size=1g,mode=1777  0 0\";\n"
"  mount += \"fdescfs   $path/compat/ubuntu/dev/fd  fdescfs   rw,linrdlnk 0 0\";\n"
"  mount += \"linprocfs $path/compat/ubuntu/proc    linprocfs rw  0 0\";\n"
"  mount += \"linsysfs  $path/compat/ubuntu/sys     linsysfs  rw  0 0\";\n"
"  mount += \"/tmp      $path/compat/ubuntu/tmp     nullfs    rw  0 0\";\n"
"  mount += \"/home     $path/compat/ubuntu/home    nullfs    rw  0 0\";\n"
"}\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:851
msgid "Then the jail can be started as usual with the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:855
#, no-wrap
msgid "# service jail start ubuntu\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:858
msgid "The Ubuntu environment can be accessed using the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:862
#, no-wrap
msgid "# jexec ubuntu chroot /compat/ubuntu /bin/bash\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:865
msgid ""
"More information can be found in the chapter crossref:linuxemu[linuxemu,"
"Linux Binary Compatibility]."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/jails/_index.adoc:867
#, no-wrap
msgid "Jail Management"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:871
msgid ""
"Once the jail is created, there are a number of operations that can be "
"performed, like starting, rebooting or deleting the jail, installing "
"software in it, etc.  In this section the different actions that can be done "
"with jails from the host will be described."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:873
#, fuzzy, no-wrap
#| msgid "Creating Jails"
msgid "List Running Jails"
msgstr "建立 Jail"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:876
msgid ""
"To list the jails that are running on the host system, the command man:"
"jls[8] can be used:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:880
#, no-wrap
msgid "# jls\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:887
#, no-wrap
msgid ""
"   JID  IP Address      Hostname                      Path\n"
"     1  192.168.250.70  classic                       /usr/local/jails/containers/classic\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:890
msgid ""
"man:jls[8] supports the `--libxo` argument, which through the man:libxo[3] "
"library allows other types of formats to be displayed, such as `JSON`, "
"`HTML`, etc."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:892
msgid "For example, execute the following command to get the `JSON` output:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:896
#, no-wrap
msgid "# jls --libxo=json\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:902
#, no-wrap
msgid "{\"__version\": \"2\", \"jail-information\": {\"jail\": [{\"jid\":1,\"ipv4\":\"192.168.250.70\",\"hostname\":\"classic\",\"path\":\"/usr/local/jails/containers/classic\"}]}}\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:905
#, fuzzy, no-wrap
#| msgid "How to build, start, and stop a jail."
msgid "Start, Restart, and Stop a Jail"
msgstr "如何联编、 启动和停止 jail。"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:908
msgid "man:service[8] is used to start, reboot, or stop a jail on the host."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:910
msgid "For example, to start a jail, run the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:914
#, no-wrap
msgid "# service jail start jailname\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:917
msgid ""
"Change the `start` argument to `restart` or `stop` to perform other actions "
"on the jail."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:919
#, no-wrap
msgid "Destroy a Jail"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:922
msgid ""
"Destroying a jail is not as simple as stopping the jail using man:service[8] "
"and removing the jail directory and [.filename]#/etc/jail.conf# entry."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:926
msgid ""
"FreeBSD takes system security very seriously.  For this reason there are "
"certain files that not even the root user can delete.  This functionality is "
"known as File Flags."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:928
msgid ""
"The first step is to stop the desired jail executing the following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:932
#, no-wrap
msgid "# service jail stop jailname\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:935
msgid ""
"The second step is to remove these flags with man:chflags[1] by executing "
"the following command, in which `classic` is the name of the jail to remove:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:939
#, no-wrap
msgid "# chflags -R 0 /usr/local/jails/classic\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:942
msgid "The third step is to delete the directory where the jail was:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:946
#, no-wrap
msgid "# rm -rf /usr/local/jails/classic\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:949
msgid ""
"Finally, it will be necessary to remove the jail entry in [.filename]#/etc/"
"jail.conf# or in [.filename]#jail.conf.d#."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:951
#, no-wrap
msgid "Handle Packages in a Jail"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:954
msgid ""
"The man:pkg[8] tool supports the `-j` argument in order to handle packages "
"installed inside the jail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:956
msgid ""
"For example, to install package:nginx-lite[] in the jail, the next command "
"can be executed *from the host*:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:960
#, no-wrap
msgid "# pkg -j classic install nginx-lite\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:963
msgid ""
"For more information on working with packages in FreeBSD, see crossref:"
"ports[ports,\"Installing Applications: Packages and Ports\"]."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:965
#, no-wrap
msgid "Access a Jail"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:968
msgid ""
"While it has been stated above that it is best to manage jails from the host "
"system, a jail can be entered with man:jexec[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:970
msgid "The jail can be entered by running man:jexec[8] from the host:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:974
#, no-wrap
msgid "# jexec -u root jailname\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:977
msgid ""
"When gaining access to the jail, the message configured in man:motd[5] will "
"be displayed."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:979
#, no-wrap
msgid "Execute Commands in a Jail"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:982
msgid ""
"To execute a command from the host system in a jail the man:jexec[8] can be "
"used."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:984
msgid ""
"For example, to stop a service that is running inside a jail, the command "
"will be executed:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:988
#, no-wrap
msgid "# jexec -l jailname service stop nginx\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/jails/_index.adoc:991
#, fuzzy, no-wrap
#| msgid "Upgrading"
msgid "Jail Upgrading"
msgstr "升级"

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:994
msgid ""
"Upgrading FreeBSD Jails ensures that the isolated environments remain "
"secure, up-to-date, and in line with the latest features and improvements "
"available in the FreeBSD ecosystem."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:996
#, no-wrap
msgid "Upgrading a Classic Jail or a Thin Jail using OpenZFS Snapshots"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1001
msgid ""
"Jails *must be updated from the host* operating system.  The default "
"behavior in FreeBSD is to disallow the use of man:chflags[1] in a jail.  "
"This will prevent the update of some files so updating from within the jail "
"will fail."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1003
#, fuzzy
#| msgid ""
#| "To update the jail to the latest patch release of the version of FreeBSD "
#| "it is already running, then execute the following commands on the host:"
msgid ""
"To update the jail to the latest patch release of the version of FreeBSD it "
"is running, execute the following commands on the host:"
msgstr "使用主机中最新的 FreeBSD 补丁更新 jail，请在主机中执行以下命令："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:1008
#, no-wrap
msgid ""
"# freebsd-update -j classic fetch install\n"
"# service jail restart classic\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1012
msgid ""
"To upgrade the jail to a new major or minor version, first upgrade the host "
"system as described in crossref:cutting-edge[freebsdupdate-upgrade,"
"\"Performing Major and Minor Version Upgrades\"].  Once the host has been "
"upgraded and rebooted, the jail can then be upgraded."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/jails/_index.adoc:1016
msgid ""
"In case of upgrade from one version to another, it is easier to create a new "
"jail than to upgrade completely."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1019
msgid ""
"For example to upgrade from 13.1-RELEASE to 13.2-RELEASE, execute the "
"following commands on the host:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:1027
#, no-wrap
msgid ""
"# freebsd-update -j classic -r 13.2-RELEASE upgrade\n"
"# freebsd-update -j classic install\n"
"# service jail restart classic\n"
"# freebsd-update -j classic install\n"
"# service jail restart classic\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/jails/_index.adoc:1033
msgid ""
"It is necessary to execute the `install` step two times.  The first one "
"upgrades the kernel, and the second one upgrades the rest of the components."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1037
#, fuzzy
#| msgid ""
#| "Then, if it was a major version upgrade, reinstall all installed packages "
#| "and restart the jail again. This is required because the ABI version "
#| "changes when upgrading between major versions of FreeBSD. From the host:"
msgid ""
"Then, if it was a major version upgrade, reinstall all installed packages "
"and restart the jail again.  This is required because the ABI version "
"changes when upgrading between major versions of FreeBSD."
msgstr ""
"如果主版本号更新了，重新安装所有软件包并重启 jail。由于FreeBSD 主版本号更新"
"时 ABI 版本也将改变，这部是必须的，在 Host 上执行："

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1039
msgid "From the host:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:1044
#, no-wrap
msgid ""
"# pkg -j jailname upgrade -f\n"
"# service jail restart jailname\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/jails/_index.adoc:1047
#, no-wrap
msgid "Upgrading a Thin Jail Using NullFS"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1052
msgid ""
"Since Thin Jails that use NullFS share the majority of system directories, "
"they are very easy to update.  It is enough to update the template.  This "
"allows updating multiple jails at the same time."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1054
#, fuzzy
#| msgid ""
#| "To update the jail to the latest patch release of the version of FreeBSD "
#| "it is already running, then execute the following commands on the host:"
msgid ""
"To update the template to the latest patch release of the version of FreeBSD "
"it is running, execute the following commands on the host:"
msgstr "使用主机中最新的 FreeBSD 补丁更新 jail，请在主机中执行以下命令："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:1059
#, no-wrap
msgid ""
"# freebsd-update -b /usr/local/jails/templates/13.1-RELEASE-base/ fetch install\n"
"# service jail restart\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1063
msgid ""
"To upgrade the template to a new major or minor version, first upgrade the "
"host system as described in crossref:cutting-edge[freebsdupdate-upgrade,"
"\"Performing Major and Minor Version Upgrades\"].  Once the host has been "
"upgraded and rebooted, the template can then be upgraded."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1065
msgid ""
"For example, to upgrade from 13.1-RELEASE to 13.2-RELEASE, execute the "
"following commands on the host:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:1073
#, no-wrap
msgid ""
"# freebsd-update -b /usr/local/jails/templates/13.1-RELEASE-base/ -r 13.2-RELEASE upgrade\n"
"# freebsd-update -b /usr/local/jails/templates/13.1-RELEASE-base/ install\n"
"# service jail restart\n"
"# freebsd-update -b /usr/local/jails/templates/13.1-RELEASE-base/ install\n"
"# service jail restart\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/jails/_index.adoc:1076
#, no-wrap
msgid "Jail Resource Limits"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1079
msgid ""
"Controlling the resources that a jail uses from the host system is a task to "
"be taken into account by the system administrator."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1081
msgid ""
"man:rctl[8] allows you to manage the resources that a jail can use from the "
"host system."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/jails/_index.adoc:1085
msgid ""
"The `kern.racct.enable` tunable must be enabled at [.filename]#/boot/loader."
"conf#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1088
msgid "The syntax to limit the resources of a jail is as follows:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:1092
#, no-wrap
msgid "rctl -a jail:<jailname>:resource:action=amount/percentage\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1095
msgid ""
"For example, to limit the maximum RAM that a jail can access, run the "
"following command:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:1099
#, no-wrap
msgid "# rctl -a jail:classic:memoryuse:deny=2G\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1102
msgid ""
"To make the limitation persistent across reboots of the host system, it will "
"be necessary to add the rule to the [.filename]#/etc/rctl.conf# file as "
"follows:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/jails/_index.adoc:1106
#, no-wrap
msgid "jail:classic:memoryuse:deny=2G/jail\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1109
msgid ""
"More information on resource limits can be found in the security chapter in "
"the crossref:security[security-resourcelimits,\"Resource Limits section\"]."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/jails/_index.adoc:1111
#, no-wrap
msgid "Jail Managers and Containers"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1114
msgid ""
"As previously explained, each type of FreeBSD Jail can be created and "
"configured manually, but FreeBSD also has third-party utilities to make "
"configuration and administration easier."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/jails/_index.adoc:1116
msgid "Below is an incomplete list of the different FreeBSD Jail managers:"
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/jails/_index.adoc:1117
#, no-wrap
msgid "Jail Managers"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1120
#, no-wrap
msgid "Name"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1120
#, no-wrap
msgid "License"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1120
#, no-wrap
msgid "Package"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1122
#, no-wrap
msgid "Documentation"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1123
#, no-wrap
msgid "BastilleBSD"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1124
#: documentation/content/en/books/handbook/jails/_index.adoc:1129
#: documentation/content/en/books/handbook/jails/_index.adoc:1139
#, no-wrap
msgid "BSD-3"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1125
#, no-wrap
msgid "package:sysutils/bastille[]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1127
#, no-wrap
msgid "link:https://bastille.readthedocs.io/en/latest/[Documentation]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1128
#, no-wrap
msgid "pot"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1130
#, no-wrap
msgid "package:sysutils/pot[]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1132
#, no-wrap
msgid "link:https://pot.pizzamig.dev/[Documentation]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1133
#, no-wrap
msgid "cbsd"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1134
#: documentation/content/en/books/handbook/jails/_index.adoc:1144
#, no-wrap
msgid "BSD-2"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1135
#, no-wrap
msgid "package:sysutils/cbsd[]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1137
#, no-wrap
msgid "link:https://www.bsdstore.ru/en/docs.html[Documentation]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1138
#, fuzzy, no-wrap
#| msgid "Jails"
msgid "AppJail"
msgstr "Jails"

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1140
#, no-wrap
msgid "package:sysutils/appjail[], for devel package:sysutils/appjail-devel[]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1142
#, no-wrap
msgid "link:https://github.com/DtxdF/AppJail#getting-started[Documentation]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1143
#, no-wrap
msgid "iocage"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1145
#, no-wrap
msgid "package:sysutils/iocage[]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1147
#, no-wrap
msgid "link:https://iocage.readthedocs.io/en/latest/[Documentation]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1148
#, no-wrap
msgid "ezjail"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1149
#, no-wrap
msgid "link:https://erdgeist.org/beerware.html[Beer Ware]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1150
#, no-wrap
msgid "package:sysutils/ezjail[]"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/jails/_index.adoc:1152
#, no-wrap
msgid "link:https://erdgeist.org/arts/software/ezjail/[Documentation]"
msgstr ""

#~ msgid "A jail is characterized by four elements:"
#~ msgstr "Jail 有四个基本特征："

#~ msgid ""
#~ "A directory subtree: the starting point from which a jail is entered. "
#~ "Once inside the jail, a process is not permitted to escape outside of "
#~ "this subtree."
#~ msgstr ""
#~ "目录子树：进入 jail 的起点。一旦进入了 jail，进程就不再被允许访问这棵子树"
#~ "以外的对象。"

#~ msgid "A hostname: which will be used by the jail."
#~ msgstr ""
#~ "主机名：将用于 jail 的主机名。 jail 主要用于存放网络服务， 因此在每个 "
#~ "mail 上能够标注一个有意义的主机名， 能够在很大程度上简化系统管理员的工作。"

#~ msgid ""
#~ "A command: the path name of an executable to run inside the jail. The "
#~ "path is relative to the root directory of the jail environment."
#~ msgstr ""
#~ "命令：准备在 jail 中执行的可执行文件的完整路径名。 这个命令是相对于 jail "
#~ "环境的根目录的， 随 jail 环境的类型不同， 可能会有很多不同之处。"

#, fuzzy
#~| msgid ""
#~| "This chapter provides an overview of the terminology and commands for "
#~| "managing FreeBSD jails. Jails are a powerful tool for both system "
#~| "administrators, and advanced users."
#~ msgid ""
#~ "This chapter provides an overview of the terminology and commands for "
#~ "managing FreeBSD jails.  Jails are a powerful tool for both system "
#~ "administrators, and advanced users."
#~ msgstr ""
#~ "本章概述了用于管理 FreeBSD jail 的术语和命令。Jail 是系统管理员和高级用户"
#~ "的强大工具。"

#~ msgid "After reading this chapter, you will know:"
#~ msgstr "读完本章节，你将会知道："

#, fuzzy
#~| msgid ""
#~| "Jails are a powerful tool, but they are not a security panacea. While it "
#~| "is not possible for a jailed process to break out on its own, there are "
#~| "several ways in which an unprivileged user outside the jail can "
#~| "cooperate with a privileged user inside the jail to obtain elevated "
#~| "privileges in the host environment."
#~ msgid ""
#~ "Jails are a powerful tool, but they are not a security panacea.  While it "
#~ "is not possible for a jailed process to break out on its own, there are "
#~ "several ways in which an unprivileged user outside the jail can cooperate "
#~ "with a privileged user inside the jail to obtain elevated privileges in "
#~ "the host environment."
#~ msgstr ""
#~ "Jail 是一个强大的工具，但不是安全银弹。尽管被在 jail 中的进程不能越狱，但"
#~ "是有几种方法可以使 jail 外的非特权用户与 jail 内的特权用户合作，以在主机环"
#~ "境中获得提升的特权。"

#, fuzzy
#~| msgid ""
#~| "Most of these attacks can be mitigated by ensuring that the jail root is "
#~| "not accessible to unprivileged users in the host environment. As a "
#~| "general rule, untrusted users with privileged access to a jail should "
#~| "not be given access to the host environment."
#~ msgid ""
#~ "Most of these attacks can be mitigated by ensuring that the jail root is "
#~ "not accessible to unprivileged users in the host environment.  As a "
#~ "general rule, untrusted users with privileged access to a jail should not "
#~ "be given access to the host environment."
#~ msgstr ""
#~ "通过确保主机环境中的非特权用户无法访问 jail 中的 root 用户，可以缓解大多数"
#~ "此类攻击。不应授予对 jail 有特权访问的不可信用户访问主机环境。"

#, no-wrap
#~ msgid "Terms Related to Jails"
#~ msgstr "与 Jail 相关的一些术语"

#~ msgid ""
#~ "To facilitate better understanding of parts of the FreeBSD system related "
#~ "to jails, their internals and the way they interact with the rest of "
#~ "FreeBSD, the following terms are used further in this chapter:"
#~ msgstr ""
#~ "为了帮助您更好地理解与 jail 有关的 FreeBSD 系统知识， 以及它们如何与 "
#~ "FreeBSD 的其它部分相互作用， 您应理解下列术语："

#, fuzzy
#~ msgid ""
#~ "The environment of processes running in a \"chroot\".  This includes "
#~ "resources such as the part of the file system which is visible, user and "
#~ "group IDs which are available, network interfaces and other IPC "
#~ "mechanisms, etc."
#~ msgstr ""
#~ "在 <quote>chroot</quote> 中运行的进程环境。 这包括类似文件系统中的可见部"
#~ "分、 可用的用户及用户组 ID、 网络接口以及其他 IPC 机制等资源。"

#~ msgid ""
#~ "The system administration utility which allows launching of processes "
#~ "within a jail environment."
#~ msgstr "用以在 jail 环境中运行进程的系统管理工具。"

#, no-wrap
#~ msgid "host (system, process, user, etc.)"
#~ msgstr "宿主 (系统、 进程、 用户等等)"

#, fuzzy
#~| msgid ""
#~| "The controlling system of a jail environment. The host system has access "
#~| "to all the hardware resources available, and can control processes both "
#~| "outside of and inside a jail environment. One of the important "
#~| "differences of the host system from a jail is that the limitations which "
#~| "apply to superuser processes inside a jail are not enforced for "
#~| "processes of the host system."
#~ msgid ""
#~ "The controlling system of a jail environment.  The host system has access "
#~ "to all the hardware resources available, and can control processes both "
#~ "outside of and inside a jail environment.  One of the important "
#~ "differences of the host system from a jail is that the limitations which "
#~ "apply to superuser processes inside a jail are not enforced for processes "
#~ "of the host system."
#~ msgstr ""
#~ "能够控制 jail 环境的系统。 宿主系统能够访问全部可用的硬件资源， 并能够控"
#~ "制 jail 环境内外的进程。 宿主系统与 jail 的一项重要区别是， 在宿主系统中的"
#~ "超级用户进程， 并不像在 jail 中那样受到一系列限制。"

#, no-wrap
#~ msgid "hosted (system, process, user, etc.)"
#~ msgstr "hosted (系统、 进程、 用户等等)"

#~ msgid ""
#~ "A process, user or other entity, whose access to resources is restricted "
#~ "by a FreeBSD jail."
#~ msgstr "可访问资源受 FreeBSD jail 限制的进程、 用户或其他实体。"

#, fuzzy
#~ msgid ""
#~ "Some administrators divide jails into the following two types: \"complete"
#~ "\" jails, which resemble a real FreeBSD system, and \"service\" jails, "
#~ "dedicated to one application or service, possibly running with "
#~ "privileges.  This is only a conceptual division and the process of "
#~ "building a jail is not affected by it.  When creating a \"complete\" jail "
#~ "there are two options for the source of the userland: use prebuilt "
#~ "binaries (such as those supplied on an install media) or build from "
#~ "source."
#~ msgstr ""
#~ "一些系统管理员喜欢将 jail 分为两类： <quote>完整的</quote> jail， 通常包含"
#~ "真正的 FreeBSD 系统， 以及 <quote>服务</quote> jail， 专用于执行一个可能使"
#~ "用特权的应用或服务。 这只是一种概念上的区分， 并不影响如何建立 jail 的过"
#~ "程。创建完整的 jail 时，用户可以从使用已经编译好的用户环境或从源码编译用户"
#~ "环境。"

#, no-wrap
#~ msgid "Installing a Jail"
#~ msgstr "安装 Jail"

#, no-wrap
#~ msgid "To install a Jail from the Internet"
#~ msgstr "从互联网安装 jail"

#, no-wrap
#~ msgid "To install a Jail from an ISO"
#~ msgstr "从 ISO 文件创建 Jail"

#, fuzzy
#~ msgid ""
#~ "To install the userland from installation media, first create the root "
#~ "directory for the jail.  This can be done by setting the `DESTDIR` "
#~ "variable to the proper location."
#~ msgstr ""
#~ "从安装包中安装用户环境：首先创建 jail 的 root 目录。可通设置"
#~ "<varname>DESTDIR</varname>变量设置。"

#, fuzzy
#~| msgid ""
#~| "Extract the binaries from the tarballs on the install media into the "
#~| "declared destination. Minimally, only the base set needs to be "
#~| "extracted, but a complete install can be performed when preferred."
#~ msgid ""
#~ "Extract the binaries from the tarballs on the install media into the "
#~ "declared destination.  Minimally, only the base set needs to be "
#~ "extracted, but a complete install can be performed when preferred."
#~ msgstr ""
#~ "解压获取到的用户环境文件到之前定义好的位置。至少需要 base（base.txz）环"
#~ "境，其他部分可按需安装。"

#~ msgid "To install just the base system:"
#~ msgstr "安装 base 系统："

#~ msgid "To install everything except the kernel:"
#~ msgstr "安装除内核以外所有部分："

#, no-wrap
#~ msgid "To build and install a Jail from source"
#~ msgstr "从源码编译安装 Jail"

#, fuzzy
#~ msgid ""
#~ "Selecting a location for a jail is the best starting point. This is where "
#~ "the jail will physically reside within the file system of the jail's "
#~ "host. A good choice can be [.filename]#/usr/jail/jailname#, where "
#~ "_jailname_ is the hostname identifying the jail. Usually, [.filename]#/"
#~ "usr/# has enough space for the jail file system, which for \"complete\" "
#~ "jails is, essentially, a replication of every file present in a default "
#~ "installation of the FreeBSD base system."
#~ msgstr ""
#~ "第一步就是为 jail 选择一个位置。 这个路径是在宿主系统中 jail 的物理位置。 "
#~ "一种常用的选择是 <filename>/usr/jail/jailname</filename>， 此处 "
#~ "<replaceable>jailname</replaceable> 是 jail 的主机名。 <filename>/usr/</"
#~ "filename> 文件系统通常会有足够的空间来保存 jail 文件系统， 对于 <quote>完"
#~ "整</quote> 的 jail 而言， 它通常包含了 FreeBSD 默认安装的基本系统中每个文"
#~ "件的副本。"

#, no-wrap
#~ msgid "Configuring the Host"
#~ msgstr "设定 Host"

#, fuzzy
#~ msgid ""
#~ "Jails are often started at boot time and the FreeBSD [.filename]#rc# "
#~ "mechanism provides an easy way to do this."
#~ msgstr ""
#~ "Jail 通常应在系统启动时启动， 因此， FreeBSD <filename>rc</filename> 机制"
#~ "提供了一些很方便的机制来简化这些工作。"

#, fuzzy, no-wrap
#~ msgid "jail_enable=\"YES\"   # Set to NO to disable starting of any jails\n"
#~ msgstr "jail_enable=\"YES\"   # 如果设为 NO 则表示不自动启动 jail\n"

#, no-wrap
#~ msgid "Fine Tuning and Administration"
#~ msgstr "微调和管理"

#, fuzzy
#~| msgid ""
#~| "There are several options which can be set for any jail, and various "
#~| "ways of combining a host FreeBSD system with jails, to produce higher "
#~| "level applications. This section presents:"
#~ msgid ""
#~ "There are several options which can be set for any jail, and various ways "
#~ "of combining a host FreeBSD system with jails, to produce higher level "
#~ "applications.  This section presents:"
#~ msgstr ""
#~ "您可以为 jail 设置许多不同的选项， 并让 FreeBSD 宿主系统以不同的方式与 "
#~ "jail 交互， 以支持更高级别的应用。 这一节将介绍："

#~ msgid ""
#~ "Some of the options available for tuning the behavior and security "
#~ "restrictions implemented by a jail installation."
#~ msgstr "一些用于微调 jail 行为和安全限制的选项。"

#~ msgid ""
#~ "Some of the high-level applications for jail management, which are "
#~ "available through the FreeBSD Ports Collection, and can be used to "
#~ "implement overall jail-based solutions."
#~ msgstr ""
#~ "一些可以通过 FreeBSD Ports 套件安装的高级 jail 管理应用程序， 这些程序可以"
#~ "用于实现一般的基于 jail 的解决方案。"

#, no-wrap
#~ msgid "System Tools for Jail Tuning in FreeBSD"
#~ msgstr "FreeBSD 提供的用于微调 jail 的系统工具"

#, no-wrap
#~ msgid "High-Level Administrative Tools in the FreeBSD Ports Collection"
#~ msgstr "由 FreeBSD Ports 套件提供的高级管理工具"

#, no-wrap
#~ msgid "Keeping Jails Patched and up to Date"
#~ msgstr "保持 jail 更新"

#, no-wrap
#~ msgid "Updating Multiple Jails"
#~ msgstr "更新多个 jail"

#, fuzzy
#~| msgid ""
#~| "The management of multiple jails can become problematic because every "
#~| "jail has to be rebuilt from scratch whenever it is upgraded. This can be "
#~| "time consuming and tedious if a lot of jails are created and manually "
#~| "updated."
#~ msgid ""
#~ "The management of multiple jails can become problematic because every "
#~ "jail has to be rebuilt from scratch whenever it is upgraded.  This can be "
#~ "time consuming and tedious if a lot of jails are created and manually "
#~ "updated."
#~ msgstr ""
#~ "多个 jail 的管理可能会成为问题，因为每个监狱必须从零开始构建，每当它被升"
#~ "级。如果创建并手动更新大量 jail，这可能既耗时又繁琐。"

#~ msgid "The goals of the setup described in this section are:"
#~ msgstr "这节介绍的配置的目的包括："

#~ msgid ""
#~ "Create a simple and easy to understand jail structure that does not "
#~ "require running a full installworld on each and every jail."
#~ msgstr ""
#~ "建立简单并易于理解的 jail 结构。 也就是说不必为每个 jail 执行完整的 "
#~ "installworld 操作。"

#~ msgid "Make it easy to add new jails or remove existing ones."
#~ msgstr "使增删 jail 更容易。"

#~ msgid "Make it easy to update or upgrade existing jails."
#~ msgstr "使更新或升级 jail 更容易。"

#~ msgid "Make it possible to run a customized FreeBSD branch."
#~ msgstr "使运行自订的 FreeBSD 分支成为可能。"

#~ msgid ""
#~ "Be paranoid about security, reducing as much as possible the possibility "
#~ "of compromise."
#~ msgstr "对安全的更偏执的追求， 尽可能减少被攻陷的可能。"

#~ msgid "Save space and inodes, as much as possible."
#~ msgstr "尽可能节省空间和 inode。"

#, fuzzy
#~ msgid ""
#~ "This design relies on a single, read-only master template which is "
#~ "mounted into each jail and one read-write device per jail.  A device can "
#~ "be a separate physical disc, a partition, or a vnode backed memory "
#~ "device.  This example uses read-write nullfs mounts."
#~ msgstr ""
#~ "这个设计极大程度上依赖于将一份只读的主模板 (known as <application>nullfs</"
#~ "application>) 挂接到每一个 jail 中， 并为每个 jail 配置一个可读写的设备。 "
#~ "这种设备可以是物理磁盘、 分区， 或以 vnode 为后端的内存盘"
#~ "（<citerefentry><refentrytitle>md</refentrytitle><manvolnum>4</"
#~ "manvolnum></citerefentry>）设备。 在这个例子中， 我们将使用可读写的 "
#~ "<application>nullfs</application> 挂接。"

#~ msgid "The file system layout is as follows:"
#~ msgstr "下面的表中描述了文件系统格局："

#, fuzzy
#~ msgid "Each jail will be mounted under the [.filename]#/home/j# directory."
#~ msgstr "每个 jail 挂接到 <filename>/home/j</filename> 目录下的一个目录。"

#, fuzzy
#~ msgid ""
#~ "The template for each jail and the read-only partition for all of the "
#~ "jails is [.filename]#/home/j/mroot#."
#~ msgstr ""
#~ "<filename>/home/j/mroot</filename> 是每个 jail 共用的模板， 对于所有的 "
#~ "jail 而言都是只读的。"

#, fuzzy
#~ msgid ""
#~ "A blank directory will be created for each jail under the [.filename]#/"
#~ "home/j# directory."
#~ msgstr ""
#~ "在 <filename>/home/j</filename> 目录中， 每个 jail 有一个对应的空目录。"

#, fuzzy
#~ msgid ""
#~ "Each jail will have a [.filename]#/s# directory that will be linked to "
#~ "the read-write portion of the system."
#~ msgstr ""
#~ "每个 jail 中都有一个 <filename>/s</filename> 目录， 这个目录将连接到系统中"
#~ "的可读写部分。"

#, fuzzy
#~ msgid ""
#~ "Each jail will have its own read-write system that is based upon [."
#~ "filename]#/home/j/skel#."
#~ msgstr ""
#~ "每个 jail 应基于 <filename>/home/j/skel</filename> 建立其可读写空间。"

#, fuzzy
#~ msgid ""
#~ "The read-write portion of each jail will be created in [.filename]#/home/"
#~ "js#."
#~ msgstr ""
#~ "每个 jailspace (jail 中的可读写部分) 应创建到 <filename>/home/js</"
#~ "filename>。"

#, no-wrap
#~ msgid "Creating the Template"
#~ msgstr "建立模板"

#~ msgid ""
#~ "This section describes the steps needed to create the master template."
#~ msgstr "这一节将介绍创建 jail 所需的只读主模板所需的步骤。"

#~ msgid ""
#~ "First, create a directory structure for the read-only file system which "
#~ "will contain the FreeBSD binaries for the jails. Then, change directory "
#~ "to the FreeBSD source tree and install the read-only file system to the "
#~ "jail template:"
#~ msgstr ""
#~ "首先， 需要为将要存放只读的 FreeBSD 执行文件的文件系统建立一个目录， 接着"
#~ "进入 FreeBSD 源代码的目录， 并在其中安装 jail 模板："

#~ msgid "Create a skeleton for the read-write portion of the system:"
#~ msgstr "创建系统中可读写部分的骨架："

#, fuzzy
#~ msgid ""
#~ "Now, symlink the read-write file system to the read-only file system. "
#~ "Ensure that the symlinks are created in the correct [.filename]#s/# "
#~ "locations as the creation of directories in the wrong locations will "
#~ "cause the installation to fail."
#~ msgstr ""
#~ "现在， 将可读写文件系统连接到只读文件系统中。 请确保您在 <filename>s/</"
#~ "filename> 目录中建立了适当的符号连接。 如果没有建立目录或建立的位置不正"
#~ "确， 可能会导致安装失败。"

#, fuzzy
#~ msgid ""
#~ "As a last step, create a generic [.filename]#/home/j/skel/etc/make.conf# "
#~ "containing this line:"
#~ msgstr ""
#~ "最后， 创建一个默认的包含下列配置的 <filename>/home/j/skel/etc/make.conf</"
#~ "filename>："

#, fuzzy, no-wrap
#~ msgid "WRKDIRPREFIX?=  /s/portbuild\n"
#~ msgstr "WRKDIRPREFIX?=  /s/portbuild\n"

#, fuzzy
#~ msgid ""
#~ "This makes it possible to compile FreeBSD ports inside each jail.  "
#~ "Remember that the ports directory is part of the read-only system.  The "
#~ "custom path for `WRKDIRPREFIX` allows builds to be done in the read-write "
#~ "portion of every jail."
#~ msgstr ""
#~ "配置 <literal>WRKDIRPREFIX</literal> 使得在每个 jail 中分别编译 FreeBSD 成"
#~ "为可能。 请注意 ports 目录是只读系统的一部分。 而自订的 "
#~ "<literal>WRKDIRPREFIX</literal> 则使得联编过程得以在 jail 中的可读写部分完"
#~ "成。"

#, fuzzy
#~ msgid ""
#~ "Add the following lines to [.filename]#/etc/fstab#, so that the read-only "
#~ "template for the jails and the read-write space will be available in the "
#~ "respective jails:"
#~ msgstr ""
#~ "在 <filename>/etc/fstab</filename> 文件中加入下列配置， 以便让系统自动挂"
#~ "接 jail 的只读模板和读写空间："

#, fuzzy, no-wrap
#~ msgid ""
#~ "/home/j/mroot   /home/j/ns     nullfs  ro  0   0\n"
#~ "/home/j/mroot   /home/j/mail   nullfs  ro  0   0\n"
#~ "/home/j/mroot   /home/j/www    nullfs  ro  0   0\n"
#~ "/home/js/ns     /home/j/ns/s   nullfs  rw  0   0\n"
#~ "/home/js/mail   /home/j/mail/s nullfs  rw  0   0\n"
#~ "/home/js/www    /home/j/www/s  nullfs  rw  0   0\n"
#~ msgstr ""
#~ "/home/j/mroot   /home/j/ns     nullfs  ro  0   0\n"
#~ "/home/j/mroot   /home/j/mail   nullfs  ro  0   0\n"
#~ "/home/j/mroot   /home/j/www    nullfs  ro  0   0\n"
#~ "/home/js/ns     /home/j/ns/s   nullfs  rw  0   0\n"
#~ "/home/js/mail   /home/j/mail/s nullfs  rw  0   0\n"
#~ "/home/js/www    /home/j/www/s  nullfs  rw  0   0\n"

#, fuzzy, no-wrap
#~ msgid ""
#~ "jail_enable=\"YES\"\n"
#~ "jail_set_hostname_allow=\"NO\"\n"
#~ "jail_list=\"ns mail www\"\n"
#~ "jail_ns_hostname=\"ns.example.org\"\n"
#~ "jail_ns_ip=\"192.168.3.17\"\n"
#~ "jail_ns_rootdir=\"/usr/home/j/ns\"\n"
#~ "jail_ns_devfs_enable=\"YES\"\n"
#~ "jail_mail_hostname=\"mail.example.org\"\n"
#~ "jail_mail_ip=\"192.168.3.18\"\n"
#~ "jail_mail_rootdir=\"/usr/home/j/mail\"\n"
#~ "jail_mail_devfs_enable=\"YES\"\n"
#~ "jail_www_hostname=\"www.example.org\"\n"
#~ "jail_www_ip=\"62.123.43.14\"\n"
#~ "jail_www_rootdir=\"/usr/home/j/www\"\n"
#~ "jail_www_devfs_enable=\"YES\"\n"
#~ msgstr ""
#~ "jail_enable=\"YES\"\n"
#~ "jail_set_hostname_allow=\"NO\"\n"
#~ "jail_list=\"ns mail www\"\n"
#~ "jail_ns_hostname=\"ns.example.org\"\n"
#~ "jail_ns_ip=\"192.168.3.17\"\n"
#~ "jail_ns_rootdir=\"/usr/home/j/ns\"\n"
#~ "jail_ns_devfs_enable=\"YES\"\n"
#~ "jail_mail_hostname=\"mail.example.org\"\n"
#~ "jail_mail_ip=\"192.168.3.18\"\n"
#~ "jail_mail_rootdir=\"/usr/home/j/mail\"\n"
#~ "jail_mail_devfs_enable=\"YES\"\n"
#~ "jail_www_hostname=\"www.example.org\"\n"
#~ "jail_www_ip=\"62.123.43.14\"\n"
#~ "jail_www_rootdir=\"/usr/home/j/www\"\n"
#~ "jail_www_devfs_enable=\"YES\"\n"

#~ msgid ""
#~ "Create the required mount points for the read-only file system of each "
#~ "jail:"
#~ msgstr "为每个 jail 创建所需的只读文件系统挂接点："

#, fuzzy
#~ msgid ""
#~ "Install the read-write template into each jail using package:sysutils/"
#~ "cpdup[]:"
#~ msgstr ""
#~ "在 jail 中安装可读写的模板。 注意您需要使用 <package>sysutils/cpdup</"
#~ "package>， 它能够帮助您确保每个目录都是正确地复制的："

#~ msgid ""
#~ "In this phase, the jails are built and prepared to run. First, mount the "
#~ "required file systems for each jail, and then start them:"
#~ msgstr ""
#~ "在这个阶段，已经创建好并准备运行。首先，为每个 Jail 挂载所需的文件系统，然"
#~ "后启动它们："

#, fuzzy
#~| msgid ""
#~| "The design of this setup provides an easy way to upgrade existing jails "
#~| "while minimizing their downtime. Also, it provides a way to roll back to "
#~| "the older version should a problem occur."
#~ msgid ""
#~ "The design of this setup provides an easy way to upgrade existing jails "
#~ "while minimizing their downtime.  Also, it provides a way to roll back to "
#~ "the older version should a problem occur."
#~ msgstr ""
#~ "有时， 由于安全问题， 或新增功能有用， 会希望将系统升级到一个新版本的 "
#~ "FreeBSD。 这种安装方式的设计使得升级现有 jail 变得很容易。 另外， 它也能最"
#~ "大限度地减小停机时间， 因为 jail 只在最后时刻才需要关闭。 另外， 它也提供"
#~ "了简单的回退到先前版本的方法。"

#, fuzzy
#~ msgid ""
#~ "The first step is to upgrade the host system. Then, create a new "
#~ "temporary read-only template in [.filename]#/home/j/mroot2#."
#~ msgstr ""
#~ "第一步是按通常的方法升级主机的系统。 接着， 在 <filename>/home/j/mroot2</"
#~ "filename> 中建立一个新的临时模板。"

#~ msgid "Recreate the read-write symlinks for the master file system:"
#~ msgstr "重建到主系统中的可读写符号连接："

#~ msgid "Next, stop the jails:"
#~ msgstr "现在是时候关闭 jail 了："

#, fuzzy
#~ msgid ""
#~ "Unmount the original file systems as the read-write systems are attached "
#~ "to the read-only system ([.filename]#/s#):"
#~ msgstr "将文件系统从读写状模式换为只读模式（<filename>/s</filename>）："

#~ msgid ""
#~ "Move the old read-only file system and replace it with the new one. This "
#~ "will serve as a backup and archive of the old read-only file system "
#~ "should something go wrong. The naming convention used here corresponds to "
#~ "when a new read-only file system has been created. Move the original "
#~ "FreeBSD Ports Collection over to the new file system to save some space "
#~ "and inodes:"
#~ msgstr ""
#~ "将先前的只读文件系统挪走， 换成新的系统。 这样做也同时保留了先前系统的备"
#~ "份， 从而可以在出现问题时从中恢复。 这里我们根据新系统的创建时间来命名。 "
#~ "此外我们把先前的 FreeBSD Ports 套件直接移动到新的文件系统中， 以节省磁盘空"
#~ "间和 inode："

#~ msgid ""
#~ "At this point the new read-only template is ready, so the only remaining "
#~ "task is to remount the file systems and start the jails:"
#~ msgstr ""
#~ "现在新的只读模板就可以用了， 剩下的事情是重新挂接文件系统并启动 jails："

#, fuzzy
#~ msgid ""
#~ "To keep jail loopback traffic off the host's loopback network interface "
#~ "`lo0`, a second loopback interface is created by adding an entry to [."
#~ "filename]#/etc/rc.conf#:"
#~ msgstr ""
#~ "为了将 jail 回环流量从主机的环回网络接口<literal>lo0</literal>上保留下来，"
#~ "通过向<filename>/etc/rc.conf</filename>添加条目来创建第二个回回接口："

#, fuzzy, no-wrap
#~ msgid "cloned_interfaces=\"lo1\"\n"
#~ msgstr "cloned_interfaces=\"lo1\"\n"

#~ msgid ""
#~ "Jails can be allowed to use aliases of this secondary loopback interface "
#~ "without interfering with the host."
#~ msgstr "可以允许 Jail 使用此辅助回环接口的别名，不会干扰主机。"

#, fuzzy, no-wrap
#~ msgid "ezjail_enable=\"YES\"\n"
#~ msgstr "ezjail_enable=\"YES\"\n"

#~ msgid ""
#~ "The service will automatically start on system boot. It can be started "
#~ "immediately for the current session:"
#~ msgstr "ezjail 将在系统启动时启动。现在使用此命令启动 ezjail："

#, no-wrap
#~ msgid "Initial Setup"
#~ msgstr "初始设定"

#~ msgid "To Populate the Jail with FreeBSD-RELEASE"
#~ msgstr "在 jail 中使用 FreeBSD-RELEASE"

#, fuzzy
#~ msgid ""
#~ "For a basejail based on the FreeBSD RELEASE matching that of the host "
#~ "computer, use `install`.  For example, on a host computer running FreeBSD "
#~ "13-STABLE, the latest RELEASE version of FreeBSD 13 will be installed in "
#~ "the jail)"
#~ msgstr ""
#~ "对于基于 FreeBSD RELEASE 版本的 basejail， 请使用 <command>install</"
#~ "command>。例如， 在运行 FreeBSD 10-STABLE 的主机上， 将会在 jail中安装最新"
#~ "的 FreeBSD -10 的 RELEASE 版本："

#, fuzzy
#~ msgid ""
#~ "The basejail's ports tree is shared by other jails.  However, downloaded "
#~ "distfiles are stored in the jail that downloaded them.  By default, these "
#~ "files are stored in [.filename]#/var/ports/distfiles# within each jail.  "
#~ "[.filename]#/var/ports# inside each jail is also used as a work directory "
#~ "when building ports."
#~ msgstr ""
#~ "basejail 的 port 树是由其他jail共享的。但是，下载的 distfiles 会被存储在下"
#~ "载这些文件的 jail 中。默认情况下，这些文件存储在每个 jail 中的 <filename>/"
#~ "var/ports/distfiles</filename> 中。jail 内的 <filename>/var/ports</"
#~ "filename> 也是 port 的工作目录。"

#, no-wrap
#~ msgid "Creating and Starting a New Jail"
#~ msgstr "建立并启动新的Jail"

#~ msgid ""
#~ "Do not enable raw network sockets unless services in the jail actually "
#~ "require them."
#~ msgstr "不要启用原始网络套接字，除非 jail 中的服务真的需要它。"

#~ msgid "Start the jail:"
#~ msgstr "启动 jial："

#~ msgid "Use a console on the jail:"
#~ msgstr "打开 dnsjail jail 的控制台："

#, fuzzy
#~| msgid ""
#~| "The jail is operating and additional configuration can be completed. "
#~| "Typical settings added at this point include:"
#~ msgid ""
#~ "The jail is operating and additional configuration can be completed.  "
#~ "Typical settings added at this point include:"
#~ msgstr "Jail 开始运行，可以完成额外的配置。这时添加的典型设置包括："

#, fuzzy
#~ msgid ""
#~ "Enter configuration settings in [.filename]#/etc/rc.conf#.  This is much "
#~ "like configuring a full computer.  The host name and IP address are not "
#~ "set here.  Those values are already provided by the jail configuration."
#~ msgstr ""
#~ "在<filename>/etc/rc.conf</filename>中输入配置信息。这和配置一台完整的计算"
#~ "机很像。这里不设置主机名和 <acronym>IP</acronym>地址。这些值已经由 jail 配"
#~ "置提供了。"

#~ msgid ""
#~ "With the jail configured, the applications for which the jail was created "
#~ "can be installed."
#~ msgstr "配置好 jail 后，可以在该 jail 中安装应用程序。"

#, no-wrap
#~ msgid "Updating Jails"
#~ msgstr "更新Jail"

#, no-wrap
#~ msgid "Updating the Operating System"
#~ msgstr "更新操作系统"

#, fuzzy
#~| msgid ""
#~| "Because the basejail's copy of the userland is shared by the other "
#~| "jails, updating the basejail automatically updates all of the other "
#~| "jails. Either source or binary updates can be used."
#~ msgid ""
#~ "Because the basejail's copy of the userland is shared by the other jails, "
#~ "updating the basejail automatically updates all of the other jails.  "
#~ "Either source or binary updates can be used."
#~ msgstr ""
#~ "因为basejail的用户的副本是由其他 jail 共享的，所以更新basejail会自动更新所"
#~ "有其他 jail。可以使用源码或二进制文件更新。"

#~ msgid ""
#~ "To build the world from source on the host, then install it in the "
#~ "basejail, use:"
#~ msgstr "在宿主机上从源码编译FreeBSD基础系统，并将其装入basejail中："

#~ msgid ""
#~ "If the world has already been compiled on the host, install it in the "
#~ "basejail with:"
#~ msgstr "如果已经在主机上编译好 world，使用以下命令将其安装到 basejail 中："

#, fuzzy
#~| msgid ""
#~| "Update the basejail to the latest patched release of the version of "
#~| "FreeBSD on the host. For example, updating from RELEASE-p1 to RELEASE-p2."
#~ msgid ""
#~ "Update the basejail to the latest patched release of the version of "
#~ "FreeBSD on the host.  For example, updating from RELEASE-p1 to RELEASE-p2."
#~ msgstr ""
#~ "使用主机中的 FreeBSD 补丁更新 basejail，例如从 RELEASE-p1 更新到 RELEASE-"
#~ "p2。"

#~ msgid "Get a console in the jail:"
#~ msgstr "打开 jail 的控制台："

#, fuzzy
#~ msgid ""
#~ "After a major version update it is recommended by package:sysutils/"
#~ "ezjail[] to make sure your `pkg` is of the correct version.  Therefore "
#~ "enter:"
#~ msgstr ""
#~ "<package>sysutils/ezjail</package> 升级到合适版本后后还需将 <command>pkg</"
#~ "command> 升级到正确版本，输入："

#~ msgid "to upgrade or downgrade to the appropriate version."
#~ msgstr "升级到或降级到适当的版本。"

#, no-wrap
#~ msgid "Updating Ports"
#~ msgstr "更新Port"

#, fuzzy
#~| msgid ""
#~| "The ports tree in the basejail is shared by the other jails. Updating "
#~| "that copy of the ports tree gives the other jails the updated version "
#~| "also."
#~ msgid ""
#~ "The ports tree in the basejail is shared by the other jails.  Updating "
#~ "that copy of the ports tree gives the other jails the updated version "
#~ "also."
#~ msgstr ""
#~ "basejail 中的 port 和其他 jail 共享。更新该 port 树时也会更新其他 jail 的 "
#~ "port。"

#, no-wrap
#~ msgid "Controlling Jails"
#~ msgstr "控制Jail"

#, no-wrap
#~ msgid "Stopping and Starting Jails"
#~ msgstr "停止与启动Jail"

#, fuzzy
#~| msgid ""
#~| "This takes effect the next time the host computer is started. A jail "
#~| "that is already running will not be stopped."
#~ msgid ""
#~ "This takes effect the next time the host computer is started.  A jail "
#~ "that is already running will not be stopped."
#~ msgstr "这将在下次启动主机时生效。已运行的 jail 不会停止。"

#~ msgid "Enabling autostart is very similar:"
#~ msgstr "开启自动启动："

#, no-wrap
#~ msgid "Archiving and Restoring Jails"
#~ msgstr "封存与还原Jail"

#, fuzzy
#~ msgid ""
#~ "The archive file can be copied elsewhere as a backup, or an existing jail "
#~ "can be restored from it with `restore`.  A new jail can be created from "
#~ "the archive, providing a convenient way to clone existing jails."
#~ msgstr ""
#~ "可以将存档文件复制到其他地方作为备份，或者用<command>restore</command>还原"
#~ "现有的 jail。可以从存档中创建一个新的 jail，为克隆现有的 jail 提供了一种方"
#~ "便的方法。"

#, no-wrap
#~ msgid "Running BIND in a Jail"
#~ msgstr "在Jail中执行BIND"

#~ msgid "Immediately create the new loopback interface:"
#~ msgstr "创建新的回环接口："

#~ msgid "Create the jail:"
#~ msgstr "创建 Jail："

#~ msgid ""
#~ "Start the jail, connect to a console running on it, and perform some "
#~ "basic configuration:"
#~ msgstr "启动 jail 并连接到它的控制台，进行基础配置："

#, fuzzy, no-wrap
#~ msgid ""
#~ "nameserver 10.0.0.62\n"
#~ "nameserver 10.0.0.61\n"
#~ msgstr ""
#~ "nameserver 10.0.0.62\n"
#~ "nameserver 10.0.0.61\n"

#, fuzzy
#~ msgid ""
#~ "Configure the name server by editing [.filename]#/usr/local/etc/namedb/"
#~ "named.conf#."
#~ msgstr ""
#~ "通过<filename>/usr/local/etc/namedb/named.conf</filename>配置域名服务器。"

#, fuzzy, no-wrap
#~ msgid "\tlisten-on\t{ 192.168.1.240; };\n"
#~ msgstr "\tlisten-on\t{ 192.168.1.240; };\n"

#, fuzzy, no-wrap
#~ msgid ""
#~ "/*\n"
#~ "\tforwarders {\n"
#~ "\t\t127.0.0.1;\n"
#~ "\t};\n"
#~ "*/\n"
#~ msgstr ""
#~ "/*\n"
#~ "\tforwarders {\n"
#~ "\t\t127.0.0.1;\n"
#~ "\t};\n"
#~ "*/\n"

#~ msgid "Start and test the name server:"
#~ msgstr "启动并测试域名服务器："

#~ msgid "A response that includes"
#~ msgstr "回应中应包含以下信息"

#, fuzzy, no-wrap
#~ msgid ";; Got answer;\n"
#~ msgstr ";; Got answer;\n"

#, fuzzy, no-wrap
#~ msgid ";; connection timed out; no servers could be reached\n"
#~ msgstr ";; connection timed out; no servers could be reached\n"

#, fuzzy, no-wrap
#~ msgid "nameserver 192.168.1.240\n"
#~ msgstr "nameserver 192.168.1.240\n"
